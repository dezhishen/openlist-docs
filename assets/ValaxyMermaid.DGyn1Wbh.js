const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mermaid.core.BJXCI-TZ.js","assets/framework.C2rCjxQ4.js","assets/chunks/dayjs.BX5x0S-s.js"])))=>i.map(i=>d[i]);
import{j as S,r as _,p as U,w as z,J as x,C as p,K as $,n as I,_ as R,z as Z}from"./framework.C2rCjxQ4.js";const A=typeof Buffer=="function",w=typeof TextDecoder=="function"?new TextDecoder:void 0;typeof TextEncoder=="function"&&new TextEncoder;const H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",P=Array.prototype.slice.call(H),g=(e=>{let t={};return e.forEach((a,i)=>t[a]=i),t})(P),W=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,l=String.fromCharCode.bind(String),B=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),F=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),j=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,O=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),a=t-65536;return l((a>>>10)+55296)+l((a&1023)+56320);case 3:return l((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return l((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},V=e=>e.replace(j,O),q=e=>{if(e=e.replace(/\s+/g,""),!W.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,a="",i,c;for(let r=0;r<e.length;)t=g[e.charAt(r++)]<<18|g[e.charAt(r++)]<<12|(i=g[e.charAt(r++)])<<6|(c=g[e.charAt(r++)]),a+=i===64?l(t>>16&255):c===64?l(t>>16&255,t>>8&255):l(t>>16&255,t>>8&255,t&255);return a},T=typeof atob=="function"?e=>atob(F(e)):A?e=>Buffer.from(e,"base64").toString("binary"):q,J=A?e=>B(Buffer.from(e,"base64")):e=>B(T(e).split("").map(t=>t.charCodeAt(0))),K=A?e=>Buffer.from(e,"base64").toString("utf8"):w?e=>w.decode(J(e)):e=>V(T(e)),N=e=>F(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),X=e=>K(N(e)),Y={key:0,class:"loading"},G={key:1,class:"error"},Q=["innerHTML"],ee=S({__name:"ValaxyMermaid",props:{code:{},theme:{},scale:{}},setup(e){const t=e,a=_(),i=_(""),c=_(!0),r=_("");let h=null;const D=async()=>{try{return h||(h=(await R(()=>import("./mermaid.core.BJXCI-TZ.js").then(u=>u.bA),__vite__mapDeps([0,1,2]))).default,h.initialize({startOnLoad:!1,theme:t.theme||"default",securityLevel:"loose",fontFamily:"inherit"})),h}catch(n){return console.error("Failed to load mermaid:",n),r.value="Failed to load mermaid library",null}},b=async()=>{if(t.code){c.value=!0,r.value="";try{const n=await D();if(!n)return;const u=X(t.code),E=`mermaid-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,{svg:M}=await n.render(E,u);i.value=M,await I();const o=a.value?.querySelector("svg");if(o){const v=o.getAttribute("viewBox");if(v){const[te,re,f,m]=v.split(" ").map(Number),y=u.trim().split(`
`)[0].toLowerCase();let s=200,d=300;if(y.includes("pie")?(s=300,d=300):y.includes("gantt")?(s=400,d=600):y.includes("journey")?(s=300,d=500):y.includes("mindmap")&&(s=400,d=500),t.scale)o.setAttribute("height",`${m*t.scale}`),o.setAttribute("width",`${f*t.scale}`);else if(m<s||f<d){const k=f<d?d/f:1,L=m<s?s/m:1,C=Math.max(k,L,1.2);o.setAttribute("height",`${m*C}`),o.setAttribute("width",`${f*C}`)}o.style.maxWidth="100%",o.style.height="auto"}o.removeAttribute("style"),o.style.maxWidth="100%",o.style.height="auto"}}catch(n){console.error("Mermaid render error:",n),r.value="Failed to render diagram"}finally{c.value=!1}}};return U(()=>{b()}),z(()=>[t.code,t.theme,t.scale],()=>{b()},{deep:!0}),(n,u)=>(p(),x("div",{class:"mermaid-container",ref_key:"containerRef",ref:a},[c.value?(p(),x("div",Y,"Loading diagram...")):r.value?(p(),x("div",G,$(r.value),1)):(p(),x("div",{key:2,innerHTML:i.value,class:"mermaid-diagram"},null,8,Q))],512))}}),ae=Z(ee,[["__scopeId","data-v-73d075d1"]]);export{ae as _};
